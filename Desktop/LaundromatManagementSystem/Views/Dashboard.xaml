<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:views="clr-namespace:LaundromatManagementSystem.Views"
             xmlns:vm="clr-namespace:LaundromatManagementSystem.ViewModels"
             x:Class="LaundromatManagementSystem.Views.Dashboard"
             x:DataType="vm:DashboardViewModel">

    <Grid RowDefinitions="Auto, *">

        <!-- Customer Header -->
        <views:CustomerHeader Grid.Row="0"
                              Language="{Binding Language, Mode=TwoWay}"
                              Theme="{Binding Theme, Mode=TwoWay}"/>

        <!-- Main Content -->
        <Grid Grid.Row="1"
              ColumnDefinitions="7*, 3*"
              ColumnSpacing="24"
              Padding="24"
              BackgroundColor="White">

            <!-- Left Panel - Services -->
            <Border Grid.Column="0"
                    StrokeThickness="0"
                    Padding="0">
                <views:ServiceGrid SelectedCategory="{Binding SelectedCategory}"
                                   Language="{Binding Language}"
                                   Theme="{Binding Theme}"
                                   CategoryChangedCommand="{Binding ChangeCategoryCommand}"
                                   AddToCartCommand="{Binding AddToCartCommand}"/>
            </Border>

            <!-- Right Panel - Shopping Cart -->
            <Border Grid.Column="1"
                    StrokeThickness="0"
                    Padding="0">
                <views:ShoppingCart Cart="{Binding Cart}"
                                    Subtotal="{Binding Subtotal}"
                                    Tax="{Binding Tax}"
                                    Total="{Binding Total}"
                                    Language="{Binding Language}"
                                    Theme="{Binding Theme}"
                                    RemoveItemCommand="{Binding RemoveFromCartCommand}"
                                    UpdateQuantityCommand="{Binding UpdateQuantityCommand}"
                                    ProcessPaymentCommand="{Binding ProcessPaymentCommand}"/>
            </Border>

        </Grid>

        <VerticalStackLayout Grid.Row="1"
                             VerticalOptions="End"
                             HorizontalOptions="FillAndExpand">
            <views:Footer/>
        </VerticalStackLayout>

        <!-- Payment Modal -->
        <Border Grid.RowSpan="2"
                BackgroundColor="#80000000"
                IsVisible="{Binding ShowPaymentModal}"
                VerticalOptions="Fill"
                HorizontalOptions="Fill">

            <Border VerticalOptions="Center"
                    HorizontalOptions="Center">
                <views:PaymentModal Total="{Binding Total}"
                                    TransactionId="{Binding TransactionId}"
                                    Language="{Binding Language}"
                                    Theme="{Binding Theme}"
                                    CloseCommand="{Binding ClosePaymentModalCommand}"
                                    PaymentCompleteCommand="{Binding CompletePaymentCommand}"/>
            </Border>

        </Border>

    </Grid>
</ContentPage>